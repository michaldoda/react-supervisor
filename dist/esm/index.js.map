{"version":3,"file":"index.js","sources":["../../src/ReactSlot.js","../../src/ReactComponent.js","../../src/ReactSupervisor.js"],"sourcesContent":["/**\n *\n * @param element\n * @param handler\n * @constructor\n */\nfunction ReactSlot(element, handler) {\n    this.element = element;\n    this.isRendered = false;\n    this.hasFailed = false;\n}\n\nexport { ReactSlot };\n","/**\n *\n * @param selector {string}\n * @param handler\n * @constructor\n */\nfunction ReactComponent(selector, handler) {\n    this.selector = selector;\n    this.handler = handler;\n}\n\nexport { ReactComponent };\n","import { ReactSlot } from \"./ReactSlot\";\nimport { ReactComponent } from \"./ReactComponent\";\nimport React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nfunction ReactSupervisor() {\n    /**\n     *\n     * @type {ReactSlot[]}\n     */\n    let slots = [];\n    /**\n     *\n     * @type {ReactComponent[]}\n     */\n    let components = [];\n    /**\n     *\n     * @type {*}\n     */\n    let watchInterval;\n    /**\n     * @return void\n     */\n    const watch = () => {\n        for (let i = 0; i < components.length; i++) {\n            let elements = document.querySelectorAll(\n                `${components[i].selector}:not(.rendered)`\n            );\n            for (let j = 0; j < elements.length; j++) {\n                console.log(components[i]);\n                renderReactSlot(elements[j], components[i].handler);\n            }\n        }\n    };\n    const renderReactSlot = (element, handler) => {\n        let slot = new ReactSlot(element, handler);\n        slot.element.classList.add(\"rendered\");\n        try {\n            // slot.render();\n            let ComponentToRender = handler;\n            ReactDOM.render(<ComponentToRender {...element.dataset} />, element);\n            slot.isRendered = true;\n            console.info(\"[ReactSupervisor] ReactSlot has been rendered.\");\n        } catch (e) {\n            slot.isRendered = false;\n            slot.hasFailed = true;\n            // console.error(\"[ReactSupervisor] ReactSlot render has failed.\",e );\n        }\n        slots.push(slot);\n    };\n\n    this.initialize = () => {\n        this.forceRender();\n        watchInterval = setInterval(watch, 5000);\n        console.info(\"[ReactSupervisor] ReactSupervisor has been initialized.\");\n    };\n    this.forceRender = () => {\n        watch();\n    };\n    this.info = () => {\n        console.table(slots);\n        console.table(components);\n        console.info(\n            `Rendered count ${document.querySelectorAll(\".rendered\").length}`\n        );\n    };\n    /**\n     *\n     * @param selector\n     * @param renderHandler\n     * @return void\n     */\n    this.registerComponent = (selector, renderHandler) => {\n        let isAlreadyRegistered =\n            components.filter((item) => {\n                return item.selector === selector;\n            }).length > 0;\n\n        if (isAlreadyRegistered) {\n            console.warn(\n                `[ReactSupervisor] Selector: \"${selector}\" is already registered, item has been skipped.`\n            );\n            return;\n        }\n\n        components.push(new ReactComponent(selector, renderHandler));\n        console.log(\"[ReactSupervisor] ReactComponent has been registered.\");\n    };\n\n    this.registerComponentWithCustomRender = (selector, customRender) => {\n        let isAlreadyRegistered =\n            components.filter((item) => {\n                return item.selector === selector;\n            }).length > 0;\n\n        if (isAlreadyRegistered) {\n            console.warn(\n                `[ReactSupervisor] Selector: \"${selector}\" is already registered, item has been skipped.`\n            );\n            return;\n        }\n\n        let element = document.querySelector(selector);\n        customRender(element, element.dataset);\n    }\n}\n\nexport default new ReactSupervisor();\n"],"names":["ReactSlot","element","handler","isRendered","hasFailed","ReactComponent","selector","ReactSupervisor","slots","components","watch","i","length","elements","document","querySelectorAll","j","console","log","renderReactSlot","slot","classList","add","ComponentToRender","ReactDOM","render","dataset","info","e","push","initialize","forceRender","watchInterval","setInterval","table","registerComponent","renderHandler","isAlreadyRegistered","filter","item","warn","registerComponentWithCustomRender","customRender","querySelector"],"mappings":"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"}